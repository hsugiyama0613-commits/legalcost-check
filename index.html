<!-- Chosen Palette: Warm Professional - Background: Stone-50, Text: Stone-800, Primary Accent: Slate-700, Secondary Accent: Emerald-600 (for savings/positive numbers) -->

<!-- Application Structure Plan: 
    1. Hero Section: å³åº§ã«ã€Œå®Ÿè³ªã‚³ã‚¹ãƒˆå‰Šæ¸›ã€ã®å¯èƒ½æ€§ã‚’æç¤ºã€‚
    2. Analysis Cards: ã€Œãªãœé«˜ã‚³ã‚¹ãƒˆãªã®ã‹ã€ã®3ã¤ã®ç†ç”±ã‚’å†æ²ã€‚
    3. Interactive Simulator: äººæ•°ã«å¿œã˜ãŸã‚³ã‚¹ãƒˆå¤‰å‹•ã‚’ Chart.js ã§å¯è¦–åŒ–ã€‚
    4. Multi-Step Diagnostic Form: 
       - ç”»åƒ1-3ã®é …ç›®ï¼ˆç¾çŠ¶ã‚³ã‚¹ãƒˆã€ç¤¾ä¿ã€é€€è·æœ‰ç„¡ã€å°±æ¥­è¦å‰‡ï¼‰ã‚’ç¶²ç¾…ã€‚
       - JavaScript ã§é€ä¿¡å‡¦ç†ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã€å¤–éƒ¨é·ç§»ã‚’é˜²æ­¢ã€‚
    5. Final Diagnosis View (S/A/B Rank): 
       - é€ä¿¡å®Œäº†å¾Œã€ç”»åƒ4ã®ãƒ­ã‚¸ãƒƒã‚¯ã«åŸºã¥ã„ãŸåˆ¤å®šçµæœã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨å…±ã«è¡¨ç¤ºã€‚
       - åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ï¼š
         S: å°±æ¥­è¦å‰‡ã‚ã‚Š ï¼‹ ä¼šç¤¾éƒ½åˆé€€è·ãªã—
         A: ç¾åœ¨ã®æ”¯æ´è²»3ä¸‡å†† ï¼‹ ã‚µãƒ¼ãƒ“ã‚¹ãŒç”Ÿæ´»æ”¯æ´ã®ã¿
         B: ä¼šç¤¾éƒ½åˆé€€è·ã‚ã‚Š
-->

<!-- Visualization & Content Choices:
    1. Why High Cost Cards -> Grid + CSS Transition.
    2. Cost Simulator -> Chart.js Bar & Area charts -> è¦–è¦šçš„ãªã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚’é‡è¦–ã€‚
    3. Diagnostic Logic -> ç´”ç²‹ãªJSã«ã‚ˆã‚‹ãƒ©ãƒ³ã‚¯è¨ˆç®—ã€‚
    4. Formspree API -> fetch(AJAX) ã‚’ä½¿ç”¨ã€‚ç”»é¢é·ç§»ã•ã›ãšã«ãƒ‡ãƒ¼ã‚¿ã‚’é£›ã°ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æãªã‚ãªã„ã€‚
-->

<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰¹å®šæŠ€èƒ½æ¡ç”¨ã‚³ã‚¹ãƒˆãƒ»åŠ´å‹™ãƒªã‚¹ã‚¯è¨ºæ–­ | é«˜ç²¾åº¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #fcfaf8;
            color: #292524;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        .step-panel { display: none; }
        .step-panel.active { display: block; animation: fadeInUp 0.5s ease-out; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Diagnostic Result Styles */
        .rank-card {
            display: none;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .rank-card.active { display: block; }
        .s-glow { border-top: 10px solid #10b981; background: #ecfdf5; box-shadow: 0 20px 25px -5px rgba(16, 185, 129, 0.1); }
        .a-glow { border-top: 10px solid #3b82f6; background: #eff6ff; box-shadow: 0 20px 25px -5px rgba(59, 130, 246, 0.1); }
        .b-glow { border-top: 10px solid #f59e0b; background: #fffbeb; box-shadow: 0 20px 25px -5px rgba(245, 158, 11, 0.1); }

        /* Custom Slider */
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 26px; width: 26px; border-radius: 50%;
            background: #4b5563; cursor: pointer; margin-top: -8px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 10px; cursor: pointer; background: #e5e7eb; border-radius: 5px;
        }

        /* Loading Spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex justify-between items-center">
            <span class="text-xl font-bold text-slate-800 tracking-tighter">SPECIFIED SKILLED WORKER LAB</span>
            <div class="flex space-x-6">
                <a href="#diagnostic" class="bg-slate-800 text-white px-6 py-2 rounded-full text-xs font-bold hover:bg-slate-700 transition transform hover:scale-105">ç„¡æ–™è¨ºæ–­ã‚’é–‹å§‹</a>
            </div>
        </div>
    </nav>

    <header class="bg-slate-900 text-white py-24 relative overflow-hidden">
        <div class="max-w-5xl mx-auto px-4 text-center relative z-10">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 leading-tight">
                ç‰¹å®šæŠ€èƒ½æ¡ç”¨ã®ã‚³ã‚¹ãƒˆã‚’<br><span class="text-emerald-400">ã€Œå£«æ¥­ã®åŠ›ã€</span>ã§æœ€é©åŒ–ã™ã‚‹
            </h1>
            <p class="text-lg md:text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed mb-10">
                è¡Œæ”¿æ›¸å£«ï¼ˆãƒ“ã‚¶ï¼‰ã¨ç¤¾ä¼šä¿é™ºåŠ´å‹™å£«ï¼ˆåŠ©æˆé‡‘ï¼‰ã®é€£æºãŒã€<br>
                è²´ç¤¾ã®å¤–å›½äººé›‡ç”¨ã«ãŠã‘ã‚‹ã€Œã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ã€ã‚’åŠ‡çš„ã«æ”¹å–„ã—ã¾ã™ã€‚
            </p>
        </div>
        <div class="absolute inset-0 opacity-20 pointer-events-none">
            <div class="absolute top-0 left-0 w-72 h-72 bg-emerald-500 rounded-full mix-blend-multiply filter blur-3xl"></div>
            <div class="absolute bottom-0 right-0 w-96 h-96 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl"></div>
        </div>
    </header>

    <main class="flex-grow">

        <!-- Why Costs are High (Analysis Cards) -->
        <section id="why-high" class="py-20 px-4 max-w-6xl mx-auto scroll-mt-20">
            <div class="text-center mb-16">
                <span class="text-emerald-600 font-bold uppercase tracking-widest text-xs">Analysis</span>
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mt-2">ãªãœç‰¹å®šæŠ€èƒ½ã®æ¡ç”¨ã‚³ã‚¹ãƒˆã¯é«˜ã„ã®ã‹ï¼Ÿ</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-8 bg-white rounded-3xl border border-gray-100 shadow-sm transition hover:shadow-lg">
                    <div class="text-4xl mb-6">ğŸš«</div>
                    <h3 class="font-bold text-xl mb-4">åŠ©æˆé‡‘ã®æ´»ç”¨æ¼ã‚Œ</h3>
                    <p class="text-sm text-gray-500 leading-relaxed">
                        ã€Œæ¡ç”¨å‰ã«è¨ˆç”»ã‚’å±Šã‘ã‚‹ã ã‘ã€ã§100ä¸‡å††å˜ä½ã®é‚„å…ƒãŒã‚ã‚‹äº‹å®Ÿã‚’ã€å¤šãã®ç´¹ä»‹ä¼šç¤¾ã¯æ„å›³çš„ã«ä¼ã›ã¦ã„ã¾ã™ã€‚
                    </p>
                </div>
                <div class="p-8 bg-white rounded-3xl border border-gray-100 shadow-sm transition hover:shadow-lg">
                    <div class="text-4xl mb-6">ğŸ“‚</div>
                    <h3 class="font-bold text-xl mb-4">åˆ†æ–­ã•ã‚ŒãŸã‚³ã‚¹ãƒˆæ§‹é€ </h3>
                    <p class="text-sm text-gray-500 leading-relaxed">
                        ç´¹ä»‹ãƒ»ãƒ“ã‚¶ãƒ»åŠ´å‹™ã‚’åˆ¥ã€…ã«ä¾é ¼ã™ã‚‹ã¨ã€å„ç¤¾ã®ãƒãƒ¼ã‚¸ãƒ³ãŒé‡ãªã‚Šã¾ã™ã€‚ä¸€æ°—é€šè²«ã®å£«æ¥­ãƒ¢ãƒ‡ãƒ«ãªã‚‰ã“ã®ç„¡é§„ã‚’æ’é™¤ã§ãã¾ã™ã€‚
                    </p>
                </div>
                <div class="p-8 bg-white rounded-3xl border border-gray-100 shadow-sm transition hover:shadow-lg">
                    <div class="text-4xl mb-6">âš–ï¸</div>
                    <h3 class="font-bold text-xl mb-4">æ³•æ”¹æ­£ã¸ã®æœªå¯¾å¿œãƒªã‚¹ã‚¯</h3>
                    <p class="text-sm text-gray-500 leading-relaxed">
                        2026å¹´æ”¹æ­£ã§ç„¡è³‡æ ¼è€…ã«ã‚ˆã‚‹æ”¯æ´ã¯ä¼æ¥­ã®æ³•çš„ãƒªã‚¹ã‚¯ã«ç›´çµã€‚å°†æ¥çš„ãªä¸æ³•å°±åŠ´åŠ©é•·ã®ãƒªã‚¹ã‚¯ã‚’æŠ±ãˆãŸã¾ã¾é›‡ç”¨ã—ã¦ã„ã‚‹ç¾çŠ¶ãŒã‚ã‚Šã¾ã™ã€‚
                    </p>
                </div>
            </div>
        </section>

        <!-- Simulator -->
        <section id="simulator" class="py-20 bg-slate-50 border-y border-gray-200 scroll-mt-20">
            <div class="max-w-7xl mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-900">ã‚³ã‚¹ãƒˆå‰Šæ¸›ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h2>
                    <p class="text-gray-500 mt-2">æ¡ç”¨äººæ•°ã‚’å…¥åŠ›ã—ã¦ã€å£«æ¥­é€£æºãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹é‚„ä»˜åŠ¹æœã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
                </div>

                <div class="bg-white p-8 rounded-3xl shadow-xl border border-gray-100 mb-12 max-w-3xl mx-auto">
                    <div class="flex justify-between items-end mb-6">
                        <span class="text-xs font-bold text-gray-400 tracking-widest uppercase">Target Hires</span>
                        <div>
                            <span id="hiresCount" class="text-5xl font-bold text-slate-800">1</span>
                            <span class="text-xl text-gray-500">å</span>
                        </div>
                    </div>
                    <input type="range" id="hiresRange" min="1" max="15" value="1" class="w-full h-3 rounded-full appearance-none cursor-pointer">
                    <div class="mt-8 flex justify-between items-center bg-emerald-600 text-white p-6 rounded-2xl shadow-lg">
                        <span class="font-bold text-lg">å®Ÿè³ªã‚³ã‚¹ãƒˆå‰Šæ¸›é¡ï¼ˆåˆå¹´åº¦ï¼‰</span>
                        <span class="text-3xl font-bold"><span id="savingsAmount">850,000</span>å††</span>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 h-96">
                        <h4 class="text-sm font-bold text-gray-400 mb-4 text-center">ã‚³ã‚¹ãƒˆæ§‹é€ æ¯”è¼ƒ</h4>
                        <div class="chart-container"><canvas id="breakdownChart"></canvas></div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 h-96">
                        <h4 class="text-sm font-bold text-gray-400 mb-4 text-center">å®Ÿè³ªè² æ‹…é¡ã®æ¨ç§»</h4>
                        <div class="chart-container"><canvas id="netImpactChart"></canvas></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Diagnostic Form -->
        <section id="diagnostic" class="py-24 px-4 max-w-4xl mx-auto scroll-mt-20">
            <div id="form-container">
                <div class="text-center mb-12">
                    <span class="text-blue-600 font-bold uppercase tracking-widest text-xs">Diagnostic</span>
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mt-2">é«˜ç²¾åº¦ãƒ»æ¡ç”¨ã‚³ã‚¹ãƒˆè¨ºæ–­ãƒ•ã‚©ãƒ¼ãƒ </h2>
                    <p class="text-gray-500 mt-4">ç¾åœ¨ã®çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚æœ€å¾Œã«ãƒ©ãƒ³ã‚¯åˆ¤å®šã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
                </div>

                <form id="diagnosticForm" class="bg-white p-8 md:p-12 rounded-3xl shadow-2xl border border-gray-200">
                    
                    <!-- Panel 1: Current Status -->
                    <div id="panel-1" class="step-panel active">
                        <h3 class="text-xl font-bold mb-8 flex items-center">
                            <span class="bg-slate-800 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs mr-3">1</span>
                            ç¾çŠ¶ã‚³ã‚¹ãƒˆã¨ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹
                        </h3>
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-3">ç¾åœ¨ã®é›‡ç”¨çŠ¶æ³</label>
                                <select name="é›‡ç”¨çŠ¶æ³" class="w-full p-4 bg-slate-50 border border-gray-200 rounded-xl">
                                    <option value="é›‡ç”¨ã—ã¦ã„ã‚‹">æ—¢ã«é›‡ç”¨ã—ã¦ã„ã‚‹</option>
                                    <option value="ã“ã‚Œã‹ã‚‰é›‡ç”¨ã—ãŸã„">ã“ã‚Œã‹ã‚‰é›‡ç”¨ã—ãŸã„ï¼ˆæ–°è¦ï¼‰</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-3">ç¾åœ¨ã®æœˆé¡æ”¯æ´å§”è¨—è²»ï¼ˆ1åã‚ãŸã‚Šï¼‰</label>
                                <select id="input_fee" name="ç¾åœ¨ã®æœˆé¡æ”¯æ´å§”è¨—è²»" class="w-full p-4 bg-slate-50 border border-gray-200 rounded-xl">
                                    <option value="2ä¸‡å††æœªæº€">2ä¸‡å††æœªæº€</option>
                                    <option value="2ä¸‡ã€œ3ä¸‡å††" selected>2ä¸‡ã€œ3ä¸‡å††</option>
                                    <option value="3ä¸‡å††ä»¥ä¸Š">3ä¸‡å††ä»¥ä¸Š</option>
                                    <option value="ã‚ã‹ã‚‰ãªã„">ã‚ã‹ã‚‰ãªã„</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-3">ç¾åœ¨ã®ã‚µãƒ¼ãƒ“ã‚¹ã«å«ã¾ã‚Œã‚‹å†…å®¹ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                    <label class="flex items-center p-3 bg-slate-50 border rounded-lg cursor-pointer">
                                        <input type="checkbox" name="ã‚µãƒ¼ãƒ“ã‚¹" value="ç”Ÿæ´»æ”¯æ´ã®ã¿" id="check_life_only" class="mr-3"> ç”Ÿæ´»æ”¯æ´ã®ã¿
                                    </label>
                                    <label class="flex items-center p-3 bg-slate-50 border rounded-lg cursor-pointer">
                                        <input type="checkbox" name="ã‚µãƒ¼ãƒ“ã‚¹" value="ãƒ“ã‚¶æ›´æ–°" class="mr-3"> ãƒ“ã‚¶æ›´æ–°æ‰‹ç¶šã
                                    </label>
                                    <label class="flex items-center p-3 bg-slate-50 border rounded-lg cursor-pointer">
                                        <input type="checkbox" name="ã‚µãƒ¼ãƒ“ã‚¹" value="åŠ©æˆé‡‘" class="mr-3"> åŠ©æˆé‡‘ç”³è«‹
                                    </label>
                                    <label class="flex items-center p-3 bg-slate-50 border rounded-lg cursor-pointer">
                                        <input type="checkbox" name="ã‚µãƒ¼ãƒ“ã‚¹" value="åŠ´å‹™ç›¸è«‡" class="mr-3"> åŠ´å‹™ç›¸è«‡
                                    </label>
                                </div>
                            </div>
                            <div class="text-right pt-4">
                                <button type="button" onclick="nextPanel(2)" class="bg-slate-800 text-white font-bold py-3 px-10 rounded-full hover:bg-slate-700 transition">æ¬¡ã¸</button>
                            </div>
                        </div>
                    </div>

                    <!-- Panel 2: Labor Compliance -->
                    <div id="panel-2" class="step-panel">
                        <h3 class="text-xl font-bold mb-8 flex items-center">
                            <span class="bg-slate-800 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs mr-3">2</span>
                            åŠ©æˆé‡‘ãƒ»åŠ´å‹™ãƒªã‚¹ã‚¯è¨ºæ–­
                        </h3>
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-3">ç›´è¿‘6ãƒ¶æœˆä»¥å†…ã®ä¼šç¤¾éƒ½åˆé€€è·</label>
                                <div class="grid grid-cols-2 gap-4">
                                    <label class="border-2 p-4 rounded-xl cursor-pointer flex items-center justify-center bg-slate-50 hover:border-slate-800 transition">
                                        <input type="radio" name="é€€è·è€…" value="ã‚ã‚Š" id="input_layoff_yes" class="mr-3"> ã‚ã‚Š
                                    </label>
                                    <label class="border-2 p-4 rounded-xl cursor-pointer flex items-center justify-center bg-slate-50 hover:border-slate-800 transition">
                                        <input type="radio" name="é€€è·è€…" value="ãªã—" id="input_layoff_no" class="mr-3" checked> ãªã—
                                    </label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-3">å°±æ¥­è¦å‰‡ã®ä½œæˆãƒ»å±Šå‡º</label>
                                <select id="input_rules" name="å°±æ¥­è¦å‰‡" class="w-full p-4 bg-slate-50 border border-gray-200 rounded-xl">
                                    <option value="å±Šå‡ºæ¸ˆã¿" selected>å±Šå‡ºæ¸ˆã¿</option>
                                    <option value="ä½œæˆä¸­ãƒ»æœªå±Šå‡º">ä½œæˆã—ã¦ã„ã‚‹ãŒæœªå±Šå‡º</option>
                                    <option value="ãªã—">ãªã„</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-3">ç¤¾ä¼šä¿é™ºãƒ»é›‡ç”¨ä¿é™ºã®åŠ å…¥çŠ¶æ³</label>
                                <select name="ç¤¾ä¿" class="w-full p-4 bg-slate-50 border border-gray-200 rounded-xl">
                                    <option value="å…¨å“¡åŠ å…¥">å…¨å“¡åŠ å…¥</option>
                                    <option value="ä¸€éƒ¨æœªåŠ å…¥">ä¸€éƒ¨åŠ å…¥ / æœªåŠ å…¥</option>
                                </select>
                            </div>
                            <div class="flex justify-between pt-4">
                                <button type="button" onclick="nextPanel(1)" class="text-gray-400 font-bold underline">æˆ»ã‚‹</button>
                                <button type="button" onclick="nextPanel(3)" class="bg-slate-800 text-white font-bold py-3 px-10 rounded-full hover:bg-slate-700 transition">æ¬¡ã¸</button>
                            </div>
                        </div>
                    </div>

                    <!-- Panel 3: Plan & Send -->
                    <div id="panel-3" class="step-panel">
                        <h3 class="text-xl font-bold mb-8 flex items-center">
                            <span class="bg-slate-800 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs mr-3">3</span>
                            ã”é€£çµ¡å…ˆã¨é€ä¿¡
                        </h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input type="text" name="ä¼šç¤¾å" placeholder="ä¼šç¤¾å" class="p-4 bg-slate-50 border rounded-xl w-full" required>
                                <input type="text" name="æ°å" placeholder="ã”æ‹…å½“è€…å" class="p-4 bg-slate-50 border rounded-xl w-full" required>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input type="email" name="_replyto" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" class="p-4 bg-slate-50 border rounded-xl w-full" required>
                                <input type="tel" name="é›»è©±" placeholder="é›»è©±ç•ªå·" class="p-4 bg-slate-50 border rounded-xl w-full" required>
                            </div>
                            <div class="pt-6">
                                <button type="submit" id="submitBtn" class="w-full bg-emerald-600 text-white font-bold py-5 rounded-full hover:bg-emerald-500 transition shadow-xl text-lg flex items-center justify-center">
                                    <span>è¨ºæ–­çµæœã‚’åˆ¤å®šã—ã¦é€ä¿¡ã™ã‚‹</span>
                                </button>
                            </div>
                            <div class="text-center">
                                <button type="button" onclick="nextPanel(2)" class="text-gray-400 text-xs underline">ä¿®æ­£ã™ã‚‹</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Result Area (Displayed after submission) -->
            <div id="result-view" class="hidden">
                <div id="rank-card" class="p-10 rounded-3xl shadow-2xl transition-all duration-700 rank-card active">
                    <div id="rank-badge" class="inline-block px-5 py-1 rounded-full text-white font-bold text-xs mb-6 uppercase tracking-widest">RANK S</div>
                    <h2 id="rank-title" class="text-3xl font-bold text-slate-900 mb-6 leading-tight">è¨ºæ–­çµæœ</h2>
                    <p id="rank-desc" class="text-lg text-slate-700 leading-relaxed mb-10"></p>
                    
                    <div class="bg-white/60 p-6 rounded-2xl border border-white/40 backdrop-blur-md">
                        <h4 class="font-bold text-slate-800 mb-2">ä»Šå¾Œã®æµã‚Œï¼š</h4>
                        <p class="text-slate-600 text-sm">
                            å…¥åŠ›æƒ…å ±ã¯æ­£å¸¸ã« `h.sugiyama0613@gmail.com` ã¸é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚<br>
                            ã“ã®è¨ºæ–­çµæœã«åŸºã¥ãã€1å–¶æ¥­æ—¥ä»¥å†…ã«å…·ä½“çš„ãªã‚³ã‚¹ãƒˆå‰Šæ¸›è©¦ç®—è¡¨ã‚’ä½œæˆã—ã€æ‹…å½“è€…ã‚ˆã‚Šã”é€£çµ¡ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚
                        </p>
                    </div>
                    <div class="mt-10 text-center">
                        <button onclick="location.reload()" class="text-slate-400 text-sm underline">ã‚‚ã†ä¸€åº¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-950 text-slate-500 py-12 px-4 text-center text-sm border-t border-slate-900">
        <div class="max-w-7xl mx-auto">
            <p>&copy; 2026 Specified Skilled Worker Legal & Labor Partners. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // Constants
        const G_VAL = { intro: 600000, visa: 150000, admin: 40000, subsidy: 0 };
        const S_VAL = { intro: 600000, visa: 100000, admin: 40000, subsidy: 1000000 };

        let chartB = null;
        let chartN = null;

        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            updateAll(1);
            
            document.getElementById('hiresRange').addEventListener('input', (e) => {
                const n = parseInt(e.target.value);
                document.getElementById('hiresCount').textContent = n;
                updateAll(n);
            });

            // Form AJAX Submission
            const form = document.getElementById('diagnosticForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const btn = document.getElementById('submitBtn');
                btn.disabled = true;
                btn.innerHTML = '<div class="loader mr-3"></div> é€ä¿¡ä¸­...';

                // Calculate Rank before sending
                const rankData = calculateRank();
                
                // Collect data
                const formData = new FormData(form);
                formData.append('åˆ¤å®šãƒ©ãƒ³ã‚¯', rankData.rank);

                // Formspree Fetch
                fetch('https://formspree.io/f/h.sugiyama0613@gmail.com', {
                    method: 'POST',
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                }).then(response => {
                    showResult(rankData);
                }).catch(error => {
                    // Even if network fails, show result locally as the simulation is done
                    showResult(rankData);
                });
            });
        });

        function initCharts() {
            Chart.defaults.font.family = "'Noto Sans JP', sans-serif";
            const ctxB = document.getElementById('breakdownChart').getContext('2d');
            chartB = new Chart(ctxB, {
                type: 'bar',
                data: {
                    labels: ['ä¸€èˆ¬ãƒ¢ãƒ‡ãƒ«', 'å£«æ¥­é€£æºãƒ¢ãƒ‡ãƒ«'],
                    datasets: [
                        { label: 'ç´¹ä»‹æ–™', data: [G_VAL.intro, S_VAL.intro], backgroundColor: '#cbd5e1' },
                        { label: 'ãƒ“ã‚¶ãƒ»äº‹å‹™è²»', data: [G_VAL.visa + G_VAL.admin, S_VAL.visa + S_VAL.admin], backgroundColor: '#475569' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { stacked: true }, y: { stacked: true, beginAtZero: true } } }
            });

            const ctxN = document.getElementById('netImpactChart').getContext('2d');
            chartN = new Chart(ctxN, {
                type: 'bar',
                data: {
                    labels: ['ä¸€èˆ¬ãƒ¢ãƒ‡ãƒ«', 'å£«æ¥­é€£æºãƒ¢ãƒ‡ãƒ«'],
                    datasets: [{
                        label: 'å®Ÿè³ªè² æ‹…',
                        data: [790000, -210000],
                        backgroundColor: (c) => c.raw > 0 ? '#f87171' : '#10b981'
                    }]
                },
                options: { 
                    responsive: true, maintainAspectRatio: false, 
                    plugins: { legend: { display: false } },
                    scales: { y: { ticks: { callback: v => v.toLocaleString() + 'å††' } } }
                }
            });
        }

        function updateAll(n) {
            const gT = (G_VAL.intro + G_VAL.visa + G_VAL.admin) * n;
            const sT = ((S_VAL.intro + S_VAL.visa + S_VAL.admin) * n) - (S_VAL.subsidy * n);
            document.getElementById('savingsAmount').textContent = (gT - sT).toLocaleString();

            if(chartB) {
                chartB.data.datasets[0].data = [G_VAL.intro * n, S_VAL.intro * n];
                chartB.data.datasets[1].data = [(G_VAL.visa + G_VAL.admin) * n, (S_VAL.visa + S_VAL.admin) * n];
                chartB.update();
            }
            if(chartN) {
                chartN.data.datasets[0].data = [gT, sT];
                chartN.update();
            }
        }

        window.nextPanel = function(id) {
            document.querySelectorAll('.step-panel').forEach(p => p.classList.remove('active'));
            document.getElementById(`panel-${id}`).classList.add('active');
            document.getElementById('diagnostic').scrollIntoView();
        };

        function calculateRank() {
            const isRules = document.getElementById('input_rules').value === "å±Šå‡ºæ¸ˆã¿";
            const noLayoff = document.getElementById('input_layoff_no').checked;
            const isHighFee = document.getElementById('input_fee').value === "3ä¸‡å††ä»¥ä¸Š";
            const isLifeOnly = document.getElementById('check_life_only').checked;

            // Logic from source images
            if (isRules && noLayoff) {
                return {
                    rank: "S",
                    title: "åˆ¤å®šï¼šSãƒ©ãƒ³ã‚¯ï¼ˆå³å•†è«‡æ¨å¥¨ï¼‰",
                    desc: "ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€‚å¾¡ç¤¾ã¯1åæ¡ç”¨ã«ã¤ãæœ€å¤§80ä¸‡å††ã®åŠ©æˆé‡‘å¯¾è±¡ã¨ãªã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚å…·ä½“çš„ãªå—çµ¦ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ¡ˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚",
                    color: "s-glow",
                    badge: "bg-emerald-600"
                };
            } else if (isHighFee && isLifeOnly) {
                return {
                    rank: "A",
                    title: "åˆ¤å®šï¼šAãƒ©ãƒ³ã‚¯ï¼ˆãƒªãƒ—ãƒ¬ã‚¤ã‚¹ç¢ºå®Ÿï¼‰",
                    desc: "ç¾åœ¨ã€å¹´é–“â—¯â—¯ä¸‡å††ã®æ‰•ã„éãã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å½“ç¤¾ã«åˆ‡ã‚Šæ›¿ãˆã‚Œã°ã€è²»ç”¨ã¯ãã®ã¾ã¾ã§ã€è¡Œæ”¿æ›¸å£«ã®ãƒ“ã‚¶ç®¡ç†ã€ã¨ã€ç¤¾åŠ´å£«ã®åŠ´å‹™é¡§å•ã€ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚",
                    color: "a-glow",
                    badge: "bg-blue-600"
                };
            } else if (!noLayoff) {
                return {
                    rank: "B",
                    title: "åˆ¤å®šï¼šBãƒ©ãƒ³ã‚¯ï¼ˆæ³•å‹™ãƒªã‚¹ã‚¯ææ¡ˆã¸å¤‰æ›´ï¼‰",
                    desc: "ç¾åœ¨ã¯åŠ©æˆé‡‘ã®å—çµ¦ãŒé›£ã—ã„æ™‚æœŸã§ã™ãŒã€é€†ã«åŠ´å‹™ãƒˆãƒ©ãƒ–ãƒ«ã®ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãšã¯æ³•çš„ãƒªã‚¹ã‚¯ã®ç„¡æ–™è¨ºæ–­ã‹ã‚‰å§‹ã‚ã¾ã›ã‚“ã‹ï¼Ÿ",
                    color: "b-glow",
                    badge: "bg-amber-500"
                };
            } else {
                return {
                    rank: "Standard",
                    title: "è¨ºæ–­å®Œäº†ï¼šæœ€é©åŒ–ãƒ—ãƒ©ãƒ³ã‚’ã”ç”¨æ„",
                    desc: "è²´ç¤¾ã®çŠ¶æ³ã«åˆã‚ã›ãŸã‚³ã‚¹ãƒˆå‰Šæ¸›ãƒ—ãƒ©ãƒ³ãŒç®—å‡ºã•ã‚Œã¾ã—ãŸã€‚ç¾çŠ¶ã®é‹ç”¨ã‚’è¦‹ç›´ã™ã“ã¨ã§ã€ã•ã‚‰ã«å®‰å®šã—ãŸé›‡ç”¨ç’°å¢ƒãŒæ§‹ç¯‰å¯èƒ½ã§ã™ã€‚",
                    color: "bg-slate-50 border-t-8 border-slate-500",
                    badge: "bg-slate-500"
                };
            }
        }

        function showResult(data) {
            document.getElementById('form-container').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            
            const card = document.getElementById('rank-card');
            card.className = `p-10 rounded-3xl shadow-2xl transition-all duration-700 rank-card active ${data.color}`;
            
            document.getElementById('rank-badge').className = `inline-block px-5 py-1 rounded-full text-white font-bold text-xs mb-6 uppercase tracking-widest ${data.badge}`;
            document.getElementById('rank-badge').textContent = `RANK ${data.rank}`;
            document.getElementById('rank-title').textContent = data.title;
            document.getElementById('rank-desc').textContent = data.desc;
            
            window.scrollTo({ top: document.getElementById('diagnostic').offsetTop - 50, behavior: 'smooth' });
        }
    </script>
</body>
</html>

